/* Optimización catálogo móvil */
@media (max-width:640px){
  /* Hero */
  /* Ajuste 2: aún más compacto (usuario reporta que ocupa medio viewport) */
  .catalog-page .hero-banner, .catalog-page .hero-banner.relative,
  .hero-banner{height:24vh!important;min-height:150px;margin-bottom:.2rem;}
  /* Mantener banner bajo pero sin achicar excesivamente la tipografía */
  /* Escalado 1.3x solicitado */
  .hero-banner .hero-title{font-size:2.15rem;line-height:1.12;margin-bottom:.16rem;letter-spacing:.68px;}
  .hero-banner .hero-sub{margin-top:.05rem;font-size:1.17rem;line-height:1.18;letter-spacing:.55px;}
  /* Botón escalado: reducir padding vertical para no aumentar grosor */
  .hero-banner .hero-cta{padding:.18rem .8rem!important;font-size:1.06rem;margin-top:.32rem;letter-spacing:.56px;width:auto;display:inline-flex;align-items:center;justify-content:center;white-space:nowrap;line-height:1.05;border-radius:999px;}
  /* Countdown más compacto y reposicionado para no empujar contenido */
  /* Más espacio visual entre botón y countdown */
  /* Separación extra: bajar countdown para que no se pegue al botón */
  .hero-banner .hero-countdown-wrapper{position:absolute;left:50%;bottom:-.55rem;transform:translateX(-50%) scale(.58);margin-top:0;}
  .hero-banner .countdown-badge{gap:.3rem!important;white-space:nowrap;align-items:center;}
  .hero-banner .countdown-badge .countdown{font-size:1.17rem;padding:.18rem .55rem;line-height:1;}
  .hero-banner .countdown-label{padding:2px 6px!important;font-size:.75rem;line-height:1;letter-spacing:.28px;white-space:nowrap;}
  .hero-banner .hero-content{padding:.4rem .6rem 1.15rem;display:flex;flex-direction:column;align-items:center;justify-content:center;}
  .countdown-badge{margin-top:.35rem!important;}

  /* Chips sticky */
  #mobile-category-chips{position:sticky;top:0;z-index:30;background:#fff;padding:.4rem .25rem .55rem;margin-top:0;}
  #mobile-category-chips a{padding:.4rem .95rem;font-size:.72rem;line-height:1;}
  #mobile-category-chips:before,#mobile-category-chips:after{content:'';position:absolute;top:0;bottom:0;width:28px;pointer-events:none;}
  #mobile-category-chips:before{left:0;background:linear-gradient(90deg,#fff,rgba(255,255,255,0));}
  #mobile-category-chips:after{right:0;background:linear-gradient(-90deg,#fff,rgba(255,255,255,0));}

  /* Contador sticky bajo chips */
  /* Header contextual sobre listado: espacio reducido */
  #banner-context-header{position:sticky;top:70px;z-index:25;margin-top:.18rem;margin-bottom:.15rem;padding-top:.30rem!important;padding-bottom:.15rem!important;}
  #banner-context-header #matched-counter-pill{transform:translateY(-30px);} /* subido 30px */
  /* Estado sticky: sólo baja el pill (no el header) para evitar solaparse y sin crear franja */
  #banner-context-header #matched-counter-pill{transform:translateY(0);transition:transform .18s ease;} /* base */
  #banner-context-header.is-stuck #matched-counter-pill{transform:translateY(22px);} /* desplaza sólo el pill cuando sticky */
  #banner-context-header.is-stuck{margin-bottom:.2rem!important;padding-top:.3rem!important;} /* sin aumentar altura grande */
  /* Urgency msg alineada */
  #banner-context-header #matched-counter-pill .urgency-msg{position:relative;top:-2px;}
  #banner-context-header .rounded-2xl{padding:.5rem .7rem!important;border-radius:16px;}
  #matched-counter-pill.counter-pill{background:#fff;border:1px solid rgba(var(--brand-primary-rgb,249,168,212),0.8);padding:.35rem .55rem;border-radius:999px;box-shadow:0 2px 4px rgba(0,0,0,.05);font-weight:600;}
  #matched-counter-pill .counter-number{font-size:.85rem;}
  #matched-counter-pill.urgency{background:linear-gradient(90deg,#fff 0%,#fff 55%,rgba(255,196,235,.85) 100%);border-color:rgba(var(--brand-primary-rgb,249,168,212),1);}
  #matched-counter-pill.urgency-hot{background:linear-gradient(90deg,#fff 0%,#ffe4ec 45%,#ff9ac1 100%);animation:pulseUrg 1.4s infinite ease-in-out;}
  #matched-counter-pill.urgency-hot .urgency-msg{color:#b8003f;text-shadow:0 0 4px rgba(255,255,255,.6);}
  #matched-counter-pill.urgency .urgency-msg{display:inline-block!important;letter-spacing:.7px;}
  @keyframes pulseUrg{0%,100%{box-shadow:0 0 0 0 rgba(255,99,160,.45);}50%{box-shadow:0 0 0 6px rgba(255,99,160,0);} }

  /* Header productos */
  .products-header{margin-top:0!important;margin-bottom:.6rem!important;gap:.5rem!important;}
  .products-header h2{font-size:1.65rem;line-height:1.1;margin-top:0!important;margin-bottom:0;}
  .products-header select{height:34px;padding:.25rem .75rem;font-size:.75rem;}
  .products-header label{font-size:.7rem;}

  /* Grid producto: asegurar dos columnas compactas */
  #product-list{grid-template-columns:repeat(2,minmax(0,1fr));gap:.55rem;padding-bottom:4.5rem;}
  .product-card{border-radius:12px;}
  /* Evitar recortes en móvil: no forzar cuadrado ni cover */
  /* Si un contenedor usa clases md:aspect-*, eso aplica sólo en >= md */
  .product-card img{width:100%;height:auto;object-fit:contain;}
  .product-card h3{font-size:.8rem;line-height:1.1;display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;margin-bottom:.25rem;}
  .product-card .product-description{display:none;}
  .product-card .product-price{font-size:.95rem;}
  .product-card .text-lg.line-through{font-size:.65rem;}
  .product-card .p-4{padding:.45rem .45rem .55rem!important;}
  .product-card .flex.justify-center{margin-top:.35rem!important;}

  /* Paginación: reducir márgenes */
  nav[aria-label]{margin-top:1.25rem!important;}

  /* Barra inferior auto hide */
  #mobile-action-bar{transition:transform .25s ease,box-shadow .25s ease;padding-bottom:calc(env(safe-area-inset-bottom,0) + .25rem);padding-top:.35rem;}
  #mobile-action-bar button, #mobile-action-bar a{font-size:.6rem;}
  #mobile-action-bar i{font-size:1rem!important;margin-bottom:.15rem!important;}
  .translate-y-full{transform:translateY(110%);} 
}

/* Animación bump contador */
.counter-pill.bump{animation:bump .5s ease;}
@keyframes bump{0%{transform:scale(1);}30%{transform:scale(1.15);}60%{transform:scale(1.05);}100%{transform:scale(1);}}

/* Auto-hide script helper classes (desktop safe) */
#mobile-action-bar.hidden-auto{transform:translateY(110%);}
